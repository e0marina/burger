{{!-- * Setup the `index.handlebars` to have the template that Handlebars can render onto.

     * Create a button in `index.handlebars` that will submit the user input into the database. --}}

<h1>Eat Da Burger</h1>

<ul>
    {{#each burgers}}
    <li>

        <p>{{this.burger_name}}</p>
        <button class="change-devoured" data-id="{{id}}">
            {{#if devoured}}Eat Me!{{else}}All Done!{{/if}}
        </button>
    </li>
    {{/each}}
</ul>

<form class="create-form">
    <textarea type="text" name="burger_name" id="bur"></textarea>

    <button type="submit">Submit</button>
</form>


<script>
    $(function () {
        $(".change-devoured").on("click", function (event) {
            var id = $(this).data("id");


            // Send the PUT request.
            $.ajax("/" + id, {
                type: "PUT",
                devoured: true
            }).then(function () {

                // Reload the page to get the updated list
                location.reload();
            });
        });

        $(".create-form").on("submit", function (event) {
            // Make sure to preventDefault on a submit event.
            event.preventDefault();

            var newBurger = {
                burger_name: $("#bur")
                    .val()
                    .trim()
            }
        };

        // Send the POST request.
        $.ajax("/", {
            type: "POST",
            data: newBurger
        }).then(function () {

            // Reload the page to get the updated list
            location.reload();
        });
    });
    });


</script>